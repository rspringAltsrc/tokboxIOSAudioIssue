<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Video Chat</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet" />
	<link rel="stylesheet" href="../css/InnerPages.css" />
	<link href="../css/slider/bootstrap-slider.min.css" rel="stylesheet" />
	<link href="../css/annotate.css" rel="stylesheet" />
	<link href="../css/spectrum.css" rel="stylesheet" />
    <link href="../css/tokbox.css" rel="stylesheet" />
</head>
<body>
	<div class="container">
	<div class="row pad" style="margin-top: 1rem;">
	    <div class="col-md-12">
	        <button type="button" id="closeButton" class="btn btn-info pull-right">Close Window</button>
            <span class="txtTimeLeft badge pull-right" id="etl"></span>
        </div>
	</div>

    <div class="row">
    <div class="col-md-12">
	    <div class="panel-group">
		    <div class="panel panel-default">
			    <div class="panel-heading">
				    <h3 class="panel-title">Video
					    <a data-toggle="collapse" href="#videoBody"></a>
				    </h3>
			    </div>
			    <div id="videoBody" class="panel-body collapse in">
				    <input type="hidden" id="hidClaimId" value="296870" />
				    <input type="hidden" id="hidPrimaryTypeId" value="2" />
				    <input type="hidden" id="hidUserId" value="40" />
				    <input type="hidden" id="tokServerHostname" value="https://rspring-pc2.altsrc.net/api/" />
				    <div class="row pad">
					    <div class="col-md-12">
						    <button type="button" id="sessionControlButton" class="btn btn-primary">Start Session</button>
                        </div>
                    </div>
				    <div id="connection-info" style="display: none;">
					    <div class="row">
						    <div class="col-md-12">
							    <strong>Archive Id:</strong>
							    <span id="archiveId"></span>
						    </div>
                        </div>
					    <div class="row">
						    <div class="col-md-12">
							    <strong>Connection Status:</strong>
							    <span id="connectionStatus"></span>
							    <div class="loading-dots" >
								    <div class="circle"></div>
								    <div class="circle"></div>
								    <div class="circle"></div>
							    </div>
                            </div>
					    </div>
                        <div class="row archiveLimitMsg">
                            <div class="alert alert-warning text-center" style="display: none;">
                                30 minute archive limit approaching in 5 minutes.
                            </div>
                            <div class="alert alert-danger text-center" style="display: none;">
                                30 minute archive limit has been reached.
                            </div>
                        </div>
				    </div>
				    <div class="row pad">
					    <div class="col-md-12">
						    <div class="form-inline">
							    <div class="btn-group contact" data-toggle="buttons" id="link-send-types">
                                    <button type="button" class="btn btn-default" id="btnShowUrls">Show URLs</button>
								    <input type="radio" name="contact" value="" class="hidden" />
								    <label class="btn btn-default">
									    <input type="radio" name="contact" value="email" />
									    <span class="glyphicon glyphicon-envelope"></span>
									    Email
								    </label>
								    <label class="btn btn-default">
									    <input type="radio" name="contact" value="sms" />
									    <span class="glyphicon glyphicon-phone"></span>
									    Text Message
								    </label>
							    </div>
						    </div>
					    </div>
				    </div>
				    <div class="row">
                        <div class="col-sm-12">
						    <div id="sessionLinks" style="display: none;">
							    <div class="row">
								    <div class="col-sm-1 text-right">iOS</div>
								    <div class="col-sm-9"><input type="text" id="tokiOSLink" class="tok-link" /></div>
								    <div class="col-sm-2"><button id="copyiOSLink" class="btn">Copy</button></div>
							    </div>
							    <div class="row">
								    <div class="col-sm-1 text-right">Android</div>
								    <div class="col-sm-9"><input type="text" id="tokAndroidLink" class="tok-link" /></div>
								    <div class="col-sm-2"><button id="copyAndroidLink" class="btn">Copy</button></div>
							    </div>
							    <div class="row">
								    <div class="col-sm-1 text-right">Browser</div>
								    <div class="col-sm-9"><input type="text" id="tokBrowserLink" class="tok-link" /></div>
								    <div class="col-sm-2"><button id="copyBrowserLink" class="btn">Copy</button></div>
							    </div>
						    </div>
					    </div>
				    </div>
				    <div class="row pad">
					    <div class="col-md-12">
						    <div class="form-inline" id="send-details">
							    <div class="form-group">
								    <label for="txtSendLinkEmail">Email address</label>

								    <input class="form-control" type="email" id="txtSendLinkEmail" placeholder="Email Address" value="" />

							    </div>
							    <div class="form-group">
								    <label for="txtSendSmsNumber">Cell Number</label>

								    <input class="form-control" type="text" id="txtSendSmsNumber" placeholder="Phone Number" value="" />

							    </div>

                                <div class="btn-group">
							        <button type="button" id="btnSendAndroid" class="btn btn-default">
							            <i class="fab fa-android"></i>
								        Send Link
							        </button>
                                    <button type="button" id="btnSendiOS" class="btn btn-default">
                                        <i class="fab fa-apple"></i>
                                        Send Link
                                    </button>
                                    <button type="button" id="btnSendBrowser" class="btn btn-default">
                                    <i class="fab fa-chrome"></i>/<i class="fab fa-safari"></i>
                                        Send Link
                                    </button>
                                </div>
                                <!--<div id="thirdTextInstruct" class="hiddenInstruct instructTest small text-center"><strong>Update the email address and cell phone as necessary and click the Send Link to send the invitation</strong></div>-->
						    </div>
					    </div>
                        <div id="sendTextInstruct" class="hiddenInstruct instructTest small text-center"><strong>Your Video Session will begin when the user clicks the link and opens the ECS Video Verify App (available on the Apple App Store and Google Play)</strong></div>
				    </div>
				    <div class="row pad"  id="videoRow">
					    <div id="videoCol" class="col-md-12">
						    <div id="videos">
							    <div id="waitingText" style="display: none;"><span class="tooltip-inner" style="max-width: 100%; font-size: 12px;">Your Video Session will begin when the user clicks the link and opens the ECS Video Verify App (available on the Apple App Store and Google Play)</span></div>
							    <div id="subscriber"></div>
							    <div id="publisher"></div>
						    </div>
					    </div>
				    </div>

				    <div class="row pad">
					    <div class="col-md-12">
						    <div id="videoControls" class="top-margin" style="display: none;">
							    <div class="row">
								    <div class="col-md-12">
									    <div class="pull-left">
										    <button type="button" class="btn btn-danger" id="recordButton">
											    <span class="glyphicon glyphicon-record"></span>
											    Start Recording
										    </button>

										    <button type="button" class="btn btn-warning" id="stopRecordingButton" style="display: none;">
											    <span class="glyphicon glyphicon-stop"></span>
											    Stop Recording
										    </button>

										    <button type="button" class="btn btn-info" id="snapshotButton">
											    <span class="glyphicon glyphicon-camera"></span>
											    Take Snapshot
										    </button>
									    </div>
                                                
									    <div class="pull-right">
										    <button id="muteButton"><i class="fas fa-microphone"></i></button>
										    <button id="volumeOff" class="glyphicon glyphicon-volume-off"></button>
										    <span style="font-size: 20px; vertical-align: middle;" class="glyphicon glyphicon-volume-down"></span>
										    <input id="volumeSlider" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
										    <span style="font-size: 20px; vertical-align: middle;" class="glyphicon glyphicon-volume-up"></span>
									    </div>
								    </div>
							    </div>
						    </div>
					    </div>
				    </div>

				    <div class="row pad">
					    <div class="col-md-12">
						    <div id="chatArea" style="display: none;">
							    <div id="msgHistory" style="overflow-y: auto; max-height: 350px"></div>
							    <input id="txtChat" style="width: 90%;" placeholder="Enter Text to Chat" disabled="disabled" class="inputBox disabled" />
							    <button class="btn btn-default disabled" id="chatSend">Send</button>
						    </div>
					    </div>
				    </div>

				    <div class="row pad">
					    <div class="col-md-12">
						    <button type="button" class="btn btn-success" id="btnSaveScreenShots" style="display: none;">
							    <span class="glyphicon glyphicon-save"></span>
							    Save Screen Shots
						    </button>
					    </div>
				    </div>

				    <div id="snapshots">
				    </div>

			    </div>
		    </div>
		    <div class="panel panel-default">
			    <div class="panel-heading">
				    <h3 class="panel-title">Archived Videos <a data-toggle="collapse" class="collapsed" href="#archivedBody"></a></h3>
			    </div>
			    <div id="archivedBody" class="panel-body panel-collapse collapse">
			        <div class="row pad">
			            <div class="col-md-12 text-right">
                            <button class="btn btn-success" id="refreshArchives"><i class="fas fa-sync"></i> Refresh archives</button>
                            </div>
                        </div>
                    <div id="archivedVideos">
					    <div class="row">
                            <div class="col-md-12">
						        <span>Loading Videos</span>
						        <div class="loading-dots">
							        <div class="circle"></div>
							        <div class="circle"></div>
							        <div class="circle"></div>
						        </div>
                            </div>
					    </div>
				    </div>
			    </div>
	        </div>
	    </div>
    </div>
    </div>
	</div>
    <!-- Annotation Modal -->
    <div class="modal fade" id="editImageModal" tabindex="-1" role="dialog" aria-labelledby="editImageModal">
	    <div class="modal-dialog modal-lg" role="document">
		    <div class="modal-content">
			    <div class="modal-header">
				    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				    <h4 class="modal-title" id="myModalLabel">Annotate Image</h4>
			    </div>
			    <div class="modal-body">
				    <input type="text" id="annotateColorPicker" />
				    <div id="annotateCanvas" style="margin: 0 auto; margin-top: 20px;">
				    </div>
			    </div>
			    <div class="modal-footer">
				    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				    <button type="button" class="btn btn-primary" id="btnAnnotateSave">Save changes</button>
			    </div>
		    </div>
	    </div>
    </div>
    <!-- Archive Delete Confirmation Modal-->
    <div id="confirm" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    Are you sure you want to delete this archive video?
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn btn-primary" id="delete">Delete</button>
                    <button type="button" data-dismiss="modal" class="btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>
	<script type="text/javascript" src="../scripts/Base64ToBlob.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="../scripts/dto/permissionsDto.js" type="text/javascript"></script>
    <script src="../scripts/security.js" type="text/javascript"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="../scripts/djaodjin-annotate.js"></script>
	<script type="text/javascript" src="../scripts/spectrum.js"></script>
    <script type="text/javascript" src="../scripts/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.5/lodash.min.js"></script>
	<script type="text/javascript" src="../scripts/slider/bootstrap-slider.min.js"></script>
	<script type="text/javascript" src="https://static.opentok.com/v2/js/opentok.js"></script>

	<script type="text/javascript" src="../scripts/cleave.js"></script>
	<script type="text/javascript" src="../scripts/phone-type-formatter.us.js"></script>

	<script type="text/javascript" src="../scripts/Tokbox/ArchiveManager.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/ScreenCaptureManager.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/SessionManager.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/SessionLinkSender.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/TokUrlManager.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/TokManager.js"></script>
	<script type="text/javascript" src="../scripts/Tokbox/TokOfficeAgent.js"></script>

	<script type="text/javascript">
	    $(document).ready(function() {
	        window.webSessionExpire = window.webSessionExpire || 60;
	        updateSessionExpire();
	    });
	    function updateSessionExpire()
	    {
	        window.webSessionExpire -= 1;
	        $('#etl').text(webSessionExpire);
	        setTimeout(function() {
	            updateSessionExpire();
	        }, 60000);
	    }
	</script>
</body>
</html>
